<!DOCTYPE html>
<html>
 <head>
  <title>Ma Todo-List</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <style type="text/css">
  <% include ./styles/styleIndex %>
  </style>
 </head>
 <body>
  <header>
   Ma Todo-List
  </header>
  <section id="todo_list">
   <ul>
<% for (let i = 0; i < todoList.length; i++) { %>
   <li><%= todoList[i] %><button class="del_button" id="del_<%= i %>" title="Supprimer">X</button><button class="mod_button" id="mod_<%= i %>" title="Modifier">M</button></li>
<% }  %>
   </ul>
   <form method="post" action="/addTodo">
    <input type="text" name="todo_input" id="add_entry_input" placeholder="Ajouter une tâche (80 caractères maximum)" maxlength="80" required /><input type="submit" id="add_entry_button" value="Valider" />
   </form>
  </section>
  <script>
   window.document.querySelector('#add_entry_input').focus();
   window.document.querySelector('form').addEventListener('submit', function (e) {
		//e.preventDefault();
		//console.log('ok');
   });

	var buttons = window.document.querySelectorAll("button.del_button");
	for (let i = 0; i < buttons.length; i++) {
		buttons[i].addEventListener('click', function (e) {
			window.location.replace('/delTodo/' + e.currentTarget.id.slice(4));
		});
	}

	buttons = window.document.querySelectorAll('button.mod_button');
	for (let i = 0; i < buttons.length; i++) {
		buttons[i].addEventListener('click', function (e) {
			window.location.href = '/modTodo/' + e.currentTarget.id.slice(4);
		});
	}


  </script>
 </body>
</html>
